# Mt. Bachelor Snowpack & Forecast Viewer

A Python-based tool that visualizes current snowpack levels (SWE and Snow Depth) against historical climatology and appends multi-model weather forecasts (including AI models) to the current trend.

## üéØ Overview

This tool fetches real-time telemetry data from USDA SNOTEL sites and combines it with weather forecasts from Open-Meteo to create a "single pane of glass" view of the Mt. Bachelor ski season. It answers the questions: *"How does this year compare to the past?"* and *"How much snow is coming in the next 10-16 days?"*

The output is a self-contained, interactive HTML file generated by Plotly.

## ‚ú® Key Features

*   **Historical Context:** Fetches 20+ years of daily data (SWE & Depth) to calculate statistical bands (Median, 10th-90th percentiles, Min/Max).
*   **Multi-Model Forecasts:** Integrates data from standard physics models (GFS, ECMWF, ICON, GEM) and experimental AI models (ECMWF AIFS, GraphCast).
*   **AI Model Support:** Includes custom logic to derive snowfall from AI models that lack explicit snow physics variables.
*   **Interactive Visualization:**
    *   Toggle between **SWE** (Snow Water Equivalent) and **Snow Depth**.
    *   Highlight specific historical years to compare trends.
    *   Hover over data points for precise values.
*   **Water Year Logic:** Automatically standardizes all data to "Water Years" (Oct 1st start) for accurate seasonal comparison.

## ‚öôÔ∏è Methodology

### 1. Data Sources

*   **SNOTEL:** Telemetry data is fetched directly from the USDA NRCS Report Generator. The script aggregates data from the following sites to create a regional average:
    *   **Three Creek Meadow** (Site 815)
    *   **Irish Taylor** (Site 545)
    *   **Chemult Alternate** (Site 388)
    *   **Summit Lake** (Site 619)
*   **Forecasts:** Weather data is fetched via the [Open-Meteo API](https://open-meteo.com/).

### 2. Forecast Logic (The "Smart Calc")

Forecasting snow depth is complex, especially with experimental AI models that often output raw precipitation and temperature but not calculated "snow depth." This tool uses a tiered approach:

*   **Method 1: Explicit Snowfall (Standard Models)**
    *   Used for GFS, ICON, ECMWF Hi-Res.
    *   Directly requests the `snowfall_sum` variable from the model physics.
*   **Method 2: Daily Aggregates (AI Models)**
    *   Used for **ECMWF AIFS** and **Google GraphCast**.
    *   These models often lack hourly snow physics. The tool calculates snow by analyzing **Daily Precipitation Sums** vs. **Daily Mean Temperature**.
    *   *Logic:* If Mean Temp ‚â§ 2.0¬∞C (35.6¬∞F), Precipitation is converted to Snow (10:1 ratio).
*   **Method 3: Hourly Smart Calc (Fallback)**
    *   If daily data fails, it falls back to analyzing hourly precipitation and temperature windows.
    *   *Logic:* If Hourly Temp ‚â§ 2.5¬∞C (36.5¬∞F), Precipitation is treated as Snow.

### 3. Elevation Correction

The script explicitly requests forecast data for **1950m (~6400ft)**. This forces the API to adjust temperatures using lapse rates, ensuring that the rain/snow line is calculated for the ski area elevation, not the generic grid elevation.

## üöÄ Usage

### Prerequisites

*   Python 3.x
*   Pip

### Installation

1.  Clone the repository:
    ```bash
    git clone [https://github.com/yourusername/snowpack-viewer.git](https://github.com/yourusername/snowpack-viewer.git)
    cd snowpack-viewer
    ```

2.  Install dependencies:
    ```bash
    pip install pandas plotly requests numpy
    ```

### Configuration

Open `Bachelor_snotel_and_forcast.py` and modify the configuration block to target different SNOTEL sites or regions:

```python
STATE = 'OR'
AREA = 'Mt. Bachelor Area'
LAT = 43.98
LON = -121.69
SITE_IDS = [815, 545, 388, 619]
Running the Tool

Run the script directly:
python Bachelor_snotel_and_
The script will output an HTML file to your Documents folder (or configured OUTPUT_DIR):

~/Documents/Snow/snotel_forecast_YYYYMMDD.htmlüìä Output Example

The generated HTML file includes:
Shaded Bands: Represent statistical normals (Green = Normal, Blue = High, Red = Low).
Solid Line: The current season's data.
Dotted Lines: Forecast projections extending 10-16 days into the future.
Grid Menu: Buttons to highlight specific past seasons (e.g., "Compare to 2017").
üìù License

MIT
